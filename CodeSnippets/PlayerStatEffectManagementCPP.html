<div class="p-2">
  <pre
    class="code_syntax"
    style="
      color: #d1d1d1;
      background: #000000;
      overflow: scroll;
      max-height: 500px;
    "
  ><span class="line_wrapper"><span style="color:#9999a9; ">// Fill out your copyright notice in the Description page of Project Settings.</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper"><span style="color:#008073; ">#</span><span style="color:#008073; ">include </span><span style="color:#02d045; ">"</span><span style="color:#40015a; ">PlayerStatEffectManagement.h</span><span style="color:#02d045; ">"</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper"><span style="color:#90b0e0; ">/// </span><span style="color:#8695b8; font-weight:bold; ">@brief</span><span style="color:#90b0e0; "> Adds provided stat effect to the array of currently active stat effects</span></span>
<span class="line_wrapper"><span style="color:#90b0e0; ">/// </span><span style="color:#8695b8; font-weight:bold; ">@param</span><span style="color:#90b0e0; "> inStatEffect</span></span>
<span class="line_wrapper"><span style="color:#e66170; font-weight:bold; ">void</span> UPlayerStatEffectManagement<span style="color:#b060b0; ">::</span>AddStatEffect<span style="color:#d2cd86; ">(</span>AStatEffect <span style="color:#d2cd86; ">*</span>inStatEffect<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>inStatEffect <span style="color:#d2cd86; ">!</span><span style="color:#d2cd86; ">=</span> <span style="color:#e66170; font-weight:bold; ">nullptr</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>ActiveStatEffects<span style="color:#d2cd86; ">.</span>Find<span style="color:#d2cd86; ">(</span>inStatEffect<span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> INDEX_NONE<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">            UE_LOG<span style="color:#d2cd86; ">(</span>LogTemp<span style="color:#d2cd86; ">,</span> Log<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">TEXT</span><span style="color:#d2cd86; ">(</span><span style="color:#02d045; ">"</span><span style="color:#00c4c4; ">STAT ADDED </span><span style="color:#007997; ">%s</span><span style="color:#02d045; ">"</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">,</span> <span style="color:#d2cd86; ">*</span>inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>GetName<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                    ALootchadorsCharacter <span style="color:#d2cd86; ">*</span>Owner <span style="color:#d2cd86; ">=</span> Cast<span style="color:#b060b0; ">&lt;</span>ALootchadorsCharacter<span style="color:#b060b0; ">&gt;</span><span style="color:#d2cd86; ">(</span>GetOwner<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    <span style="color:#9999a9; ">// add it to the array, and call OnApply;</span></span>
<span class="line_wrapper">                    ActiveStatEffects<span style="color:#d2cd86; ">.</span>AddUnique<span style="color:#d2cd86; ">(</span>inStatEffect<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>OwningChar <span style="color:#d2cd86; ">=</span> Owner<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>Active<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>OnApply<span style="color:#d2cd86; ">(</span>Owner<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">!</span>inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>IsEmpty<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                        <span style="color:#e66170; font-weight:bold; ">switch</span> <span style="color:#d2cd86; ">(</span>inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>GetStatEffectType<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span> <span style="color:#9999a9; ">// enumtest</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper"><span style="color:#e34adc; ">                        </span><span style="color:#e66170; font-weight:bold; ">default</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                        <span style="color:#e66170; font-weight:bold; ">case </span><span style="color:#007d45; ">EStatEffectType</span><span style="color:#b060b0; ">::</span><span style="color:#007d45; ">Active</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Convert to array</span></span>
<span class="line_wrapper">                            TArray<span style="color:#b060b0; ">&lt;</span>FGameplayTag<span style="color:#b060b0; ">&gt;</span> TagArray<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Probably wanna get the modifier tags from the Lootchar here</span></span>
<span class="line_wrapper">                            inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>GetGameplayTagArray<span style="color:#d2cd86; ">(</span>TagArray<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                            FGameplayTagContainer TempTagsContainer <span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Go through each tag to see if it exists</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">auto</span> <span style="color:#d2cd86; ">&amp;</span>Tag <span style="color:#b060b0; ">:</span> TagArray<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Contains<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                    RefCountedAbilityTags<span style="color:#d2cd86; ">[</span>Tag<span style="color:#d2cd86; ">]</span> <span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">=</span> <span style="color:#008c00; ">1</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                                <span style="color:#e66170; font-weight:bold; ">else</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                    RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Add<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">,</span> <span style="color:#008c00; ">1</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                    TempTagsContainer<span style="color:#d2cd86; ">.</span>AddTag<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>TempTagsContainer <span style="color:#d2cd86; ">!</span><span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                Owner<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>AddOrRemoveGameplayTags<span style="color:#d2cd86; ">(</span>TempTagsContainer<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">false</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                        <span style="color:#e66170; font-weight:bold; ">case </span><span style="color:#007d45; ">EStatEffectType</span><span style="color:#b060b0; ">::</span><span style="color:#007d45; ">Passive</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Convert to array</span></span>
<span class="line_wrapper">                            TArray<span style="color:#b060b0; ">&lt;</span>FGameplayTag<span style="color:#b060b0; ">&gt;</span> TagArray<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Probably wanna get the modifier tags from the Lootchar here</span></span>
<span class="line_wrapper">                            inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>GetGameplayTagArray<span style="color:#d2cd86; ">(</span>TagArray<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                            FGameplayTagContainer TempTagsContainer <span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Go through each tag to see if it exists</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">auto</span> <span style="color:#d2cd86; ">&amp;</span>Tag <span style="color:#b060b0; ">:</span> TagArray<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Contains<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                    <span style="color:#e66170; font-weight:bold; ">int</span> <span style="color:#d2cd86; ">&amp;</span>current <span style="color:#d2cd86; ">=</span> RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>FindOrAdd<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                    current <span style="color:#d2cd86; ">=</span> current<span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">+</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                                <span style="color:#e66170; font-weight:bold; ">else</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                    RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Add<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">,</span> <span style="color:#008c00; ">1</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                    TempTagsContainer<span style="color:#d2cd86; ">.</span>AddTag<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>TempTagsContainer <span style="color:#d2cd86; ">!</span><span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                Owner<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>AddOrRemoveGameplayTags<span style="color:#d2cd86; ">(</span>TempTagsContainer<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">false</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            ActiveStatEffects<span style="color:#d2cd86; ">.</span>AddUnique<span style="color:#d2cd86; ">(</span>inStatEffect<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                        <span style="color:#e66170; font-weight:bold; ">case </span><span style="color:#007d45; ">EStatEffectType</span><span style="color:#b060b0; ">::</span><span style="color:#007d45; ">Container</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                        <span style="color:#e66170; font-weight:bold; ">case </span><span style="color:#007d45; ">EStatEffectType</span><span style="color:#b060b0; ">::</span><span style="color:#007d45; ">VisualOnly</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                        <span style="color:#e66170; font-weight:bold; ">case </span><span style="color:#007d45; ">EStatEffectType</span><span style="color:#b060b0; ">::</span><span style="color:#007d45; ">OneShot</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">{</span> <span style="color:#9999a9; ">// Convert to array</span></span>
<span class="line_wrapper">                            TArray<span style="color:#b060b0; ">&lt;</span>FGameplayTag<span style="color:#b060b0; ">&gt;</span> TagArray<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Probably wanna get the modifier tags from the Lootchar here</span></span>
<span class="line_wrapper">                            inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>GetGameplayTagArray<span style="color:#d2cd86; ">(</span>TagArray<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                            FGameplayTagContainer TempTagsContainer <span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// Go through each tag to see if it exists</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">auto</span> <span style="color:#d2cd86; ">&amp;</span>Tag <span style="color:#b060b0; ">:</span> TagArray<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Add<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">,</span> <span style="color:#008c00; ">1</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                                TempTagsContainer<span style="color:#d2cd86; ">.</span>AddTag<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>TempTagsContainer <span style="color:#d2cd86; ">!</span><span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                                Owner<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>AddOrRemoveGameplayTags<span style="color:#d2cd86; ">(</span>TempTagsContainer<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">false</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                            <span style="color:#9999a9; ">// PrintTMapValues(inStatEffect-&gt;GetName() + " : Added");</span></span>
<span class="line_wrapper">                            ActiveStatEffects<span style="color:#d2cd86; ">.</span>AddUnique<span style="color:#d2cd86; ">(</span>inStatEffect<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">AStatEffect <span style="color:#d2cd86; ">*</span>UPlayerStatEffectManagement<span style="color:#b060b0; ">::</span>ApplyStatEffect<span style="color:#d2cd86; ">(</span>FDataTableRowHandle StatCfg<span style="color:#d2cd86; ">,</span> FStatEffectInstanceParams InstanceParams<span style="color:#d2cd86; ">,</span> FTransform Transform<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">bool</span> <span style="color:#d2cd86; ">&amp;</span>Successful<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">    AStatEffect <span style="color:#d2cd86; ">*</span>_stat <span style="color:#d2cd86; ">=</span> ApplyStatEffect_Impl<span style="color:#d2cd86; ">(</span>StatCfg<span style="color:#d2cd86; ">,</span> InstanceParams<span style="color:#d2cd86; ">,</span> Transform<span style="color:#d2cd86; ">,</span> Successful<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>_stat <span style="color:#d2cd86; ">&amp;</span><span style="color:#d2cd86; ">&amp;</span> Successful<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        AddStatEffect<span style="color:#d2cd86; ">(</span>_stat<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">return</span> _stat<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper"><span style="color:#9999a9; ">// Queue it up...</span></span>
<span class="line_wrapper"><span style="color:#e66170; font-weight:bold; ">void</span> UPlayerStatEffectManagement<span style="color:#b060b0; ">::</span>QueueStatEffect<span style="color:#d2cd86; ">(</span>FDataTableRowHandle StatCfg<span style="color:#d2cd86; ">,</span> FStatEffectInstanceParams InstanceParams<span style="color:#d2cd86; ">,</span> FTransform Transform<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">bool</span> <span style="color:#d2cd86; ">&amp;</span>Successful<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">    AStatEffect <span style="color:#d2cd86; ">*</span>_stat <span style="color:#d2cd86; ">=</span> ApplyStatEffect_Impl<span style="color:#d2cd86; ">(</span>StatCfg<span style="color:#d2cd86; ">,</span> InstanceParams<span style="color:#d2cd86; ">,</span> Transform<span style="color:#d2cd86; ">,</span> Successful<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>_stat <span style="color:#d2cd86; ">&amp;</span><span style="color:#d2cd86; ">&amp;</span> Successful<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        QueuedStatEffects<span style="color:#d2cd86; ">.</span>Add<span style="color:#d2cd86; ">(</span>_stat<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper"><span style="color:#e66170; font-weight:bold; ">void</span> UPlayerStatEffectManagement<span style="color:#b060b0; ">::</span>UpdateStatEffectsOnTick<span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">float</span> DeltaSeconds<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">    ALootchadorsCharacter <span style="color:#d2cd86; ">*</span>Owner <span style="color:#d2cd86; ">=</span> Cast<span style="color:#b060b0; ">&lt;</span>ALootchadorsCharacter<span style="color:#b060b0; ">&gt;</span><span style="color:#d2cd86; ">(</span>GetOwner<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>ActiveStatEffects<span style="color:#d2cd86; ">.</span>Num<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">&gt;</span> <span style="color:#008c00; ">0</span> <span style="color:#d2cd86; ">&amp;</span><span style="color:#d2cd86; ">&amp;</span> QueuedStatEffects<span style="color:#d2cd86; ">.</span>Num<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">&gt;</span> <span style="color:#008c00; ">0</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">auto</span> <span style="color:#d2cd86; ">&amp;</span>stat <span style="color:#b060b0; ">:</span> ActiveStatEffects<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>stat <span style="color:#d2cd86; ">!</span><span style="color:#d2cd86; ">=</span> QueuedStatEffects<span style="color:#d2cd86; ">.</span>Last<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>stat<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>GetStatEffectType<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> EStatEffectType<span style="color:#b060b0; ">::</span>OneShot <span style="color:#d2cd86; ">|</span><span style="color:#d2cd86; ">|</span> stat<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>GetStatEffectType<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> EStatEffectType<span style="color:#b060b0; ">::</span>Active<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                    stat<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>NeedsKilled<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">// COSMETIC Death loop: the stat effect is told to be removed, can call whatever it wants, but after this loop the mgr will remove it from its list and not know about it anymore.</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span>AStatEffect <span style="color:#d2cd86; ">*</span>StatEffect <span style="color:#b060b0; ">:</span> ActiveStatEffects<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>NeedsKilled<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>OnRemove<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">!</span>StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>IsEmpty<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                    <span style="color:#9999a9; ">// Convert to array</span></span>
<span class="line_wrapper">                    TArray<span style="color:#b060b0; ">&lt;</span>FGameplayTag<span style="color:#b060b0; ">&gt;</span> TagArray<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    <span style="color:#9999a9; ">// Probably wanna get the modifier tags from the Lootchar here</span></span>
<span class="line_wrapper">                    StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>GetGameplayTagArray<span style="color:#d2cd86; ">(</span>TagArray<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                    FGameplayTagContainer TempTagsContainer <span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                    <span style="color:#9999a9; ">// Go through each tag to see if it exists</span></span>
<span class="line_wrapper">                    <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">auto</span> <span style="color:#d2cd86; ">&amp;</span>Tag <span style="color:#b060b0; ">:</span> TagArray<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                        <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Contains<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                            TempTagsContainer<span style="color:#d2cd86; ">.</span>AddTag<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                            RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Remove<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                    Owner<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>AddOrRemoveGameplayTags<span style="color:#d2cd86; ">(</span>TempTagsContainer<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">true</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>Zombie<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>QueuedStatEffects<span style="color:#d2cd86; ">.</span>Num<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">&gt;</span> <span style="color:#008c00; ">0</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        AddStatEffect<span style="color:#d2cd86; ">(</span>QueuedStatEffects<span style="color:#d2cd86; ">.</span>Pop<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>ActiveStatEffects<span style="color:#d2cd86; ">.</span>Num<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">&gt;</span> <span style="color:#008c00; ">0</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">/*Update loop, DO NOT Delete pickups during this*/</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span>AStatEffect <span style="color:#d2cd86; ">*</span>StatEffect <span style="color:#b060b0; ">:</span> ActiveStatEffects<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>Active<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">switch</span> <span style="color:#d2cd86; ">(</span>StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>TimeType<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">case </span><span style="color:#007d45; ">EStatEffectTimeType</span><span style="color:#b060b0; ">::</span><span style="color:#007d45; ">Duration</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                    StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span><span style="color:#e66170; font-weight:bold; ">OnUpdate</span><span style="color:#d2cd86; ">(</span>DeltaSeconds<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>CurrentLifetime <span style="color:#d2cd86; ">&gt;</span> StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>GetStatDuration<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                        StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>NeedsKilled<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">case </span><span style="color:#007d45; ">EStatEffectTimeType</span><span style="color:#b060b0; ">::</span><span style="color:#007d45; ">Infinite</span><span style="color:#e34adc; ">:</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                    StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span><span style="color:#e66170; font-weight:bold; ">OnUpdate</span><span style="color:#d2cd86; ">(</span>DeltaSeconds<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">            StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>CurrentLifetime <span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">=</span> DeltaSeconds<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">        Owner <span style="color:#d2cd86; ">=</span> Cast<span style="color:#b060b0; ">&lt;</span>ALootchadorsCharacter<span style="color:#b060b0; ">&gt;</span><span style="color:#d2cd86; ">(</span>GetOwner<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">// COSMETIC Death loop: the stat effect is told to be removed, can call whatever it wants, but after this loop the mgr will remove it from its list and not know about it anymore.</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span>AStatEffect <span style="color:#d2cd86; ">*</span>StatEffect <span style="color:#b060b0; ">:</span> ActiveStatEffects<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>StatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>NeedsKilled<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                RemoveStatEffect<span style="color:#d2cd86; ">(</span>StatEffect<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">// Housekeeping complete; now remove the dying stat FX from mgmnt</span></span>
<span class="line_wrapper">        ActiveStatEffects<span style="color:#d2cd86; ">.</span>RemoveAllSwap<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">[</span><span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">]</span><span style="color:#d2cd86; ">(</span>AStatEffect <span style="color:#d2cd86; ">*</span>Stat<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                                        <span style="color:#b060b0; ">{</span> <span style="color:#e66170; font-weight:bold; ">return</span> Stat<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>NeedsKilled <span style="color:#d2cd86; ">|</span><span style="color:#d2cd86; ">|</span> Stat<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>EffectState <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> EStatEffectState<span style="color:#b060b0; ">::</span>Zombie<span style="color:#b060b0; ">;</span> <span style="color:#b060b0; ">}</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">}</span> <span style="color:#9999a9; ">// end tick loop</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper"><span style="color:#90b0e0; ">/// </span><span style="color:#8695b8; font-weight:bold; ">@brief</span><span style="color:#90b0e0; "> Removes stat effect / removes one from the stack of active stat effects count</span></span>
<span class="line_wrapper"><span style="color:#90b0e0; ">/// </span><span style="color:#8695b8; font-weight:bold; ">@param</span><span style="color:#90b0e0; "> inStatEffect</span></span>
<span class="line_wrapper"><span style="color:#e66170; font-weight:bold; ">void</span> UPlayerStatEffectManagement<span style="color:#b060b0; ">::</span>RemoveStatEffect<span style="color:#d2cd86; ">(</span>AStatEffect <span style="color:#d2cd86; ">*</span><span style="color:#d2cd86; ">&amp;</span>inStatEffect<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">    ALootchadorsCharacter <span style="color:#d2cd86; ">*</span>Owner <span style="color:#d2cd86; ">=</span> Cast<span style="color:#b060b0; ">&lt;</span>ALootchadorsCharacter<span style="color:#b060b0; ">&gt;</span><span style="color:#d2cd86; ">(</span>GetOwner<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#9999a9; ">// UPlayerStatEffectManagement::RemoveStatEffect(AStatEffect*&amp; inStatEffect);</span></span>
<span class="line_wrapper">    inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>OnRemove<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">!</span>inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>IsEmpty<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">// Convert to array</span></span>
<span class="line_wrapper">        TArray<span style="color:#b060b0; ">&lt;</span>FGameplayTag<span style="color:#b060b0; ">&gt;</span> TagArray<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">// Probably wanna get the modifier tags from the Lootchar here</span></span>
<span class="line_wrapper">        inStatEffect<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>StatEffectCFGs<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>cfgs<span style="color:#d2cd86; ">.</span>GameplayCFG<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>Gameplay<span style="color:#d2cd86; ">.</span>PlayerStatTags<span style="color:#d2cd86; ">.</span>GetGameplayTagArray<span style="color:#d2cd86; ">(</span>TagArray<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">        FGameplayTagContainer TempTagsContainer <span style="color:#d2cd86; ">=</span> FGameplayTagContainer<span style="color:#b060b0; ">::</span>EmptyContainer<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">// Go through each tag to see if it exists</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">auto</span> <span style="color:#d2cd86; ">&amp;</span>Tag <span style="color:#b060b0; ">:</span> TagArray<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">            <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Contains<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                RefCountedAbilityTags<span style="color:#d2cd86; ">[</span>Tag<span style="color:#d2cd86; ">]</span> <span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">=</span> <span style="color:#008c00; ">1</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">if</span> <span style="color:#d2cd86; ">(</span>RefCountedAbilityTags<span style="color:#d2cd86; ">[</span>Tag<span style="color:#d2cd86; ">]</span> <span style="color:#d2cd86; ">=</span><span style="color:#d2cd86; ">=</span> <span style="color:#008c00; ">0</span><span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">                    TempTagsContainer<span style="color:#d2cd86; ">.</span>AddTag<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    RefCountedAbilityTags<span style="color:#d2cd86; ">.</span>Remove<span style="color:#d2cd86; ">(</span>Tag<span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">        Owner<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>AddOrRemoveGameplayTags<span style="color:#d2cd86; ">(</span>TempTagsContainer<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">true</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"><span style="color:#e66170; font-weight:bold; ">void</span> UPlayerStatEffectManagement<span style="color:#b060b0; ">::</span>PrintTMapValues<span style="color:#d2cd86; ">(</span>FString WhereCalledFrom<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">    GEngine<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>AddOnScreenDebugMessage<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">-</span><span style="color:#008c00; ">1</span><span style="color:#d2cd86; ">,</span> <span style="color:#009f00; ">15.0</span><span style="color:#006600; ">f</span><span style="color:#d2cd86; ">,</span> FColor<span style="color:#b060b0; ">::</span>Red<span style="color:#d2cd86; ">,</span> FString<span style="color:#b060b0; ">::</span>Printf<span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">TEXT</span><span style="color:#d2cd86; ">(</span><span style="color:#02d045; ">"</span><span style="color:#007997; ">%s</span><span style="color:#02d045; ">"</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">,</span> <span style="color:#d2cd86; ">*</span>WhereCalledFrom<span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">for</span> <span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">const</span> TPair<span style="color:#b060b0; ">&lt;</span>FGameplayTag<span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">int</span><span style="color:#b060b0; ">&gt;</span> <span style="color:#d2cd86; ">&amp;</span><span style="color:#e66170; font-weight:bold; ">pair</span> <span style="color:#b060b0; ">:</span> RefCountedAbilityTags<span style="color:#d2cd86; ">)</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">{</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">pair</span><span style="color:#d2cd86; ">.</span>Key<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">pair</span><span style="color:#d2cd86; ">.</span>Value<span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">        GEngine<span style="color:#d2cd86; ">-</span><span style="color:#d2cd86; ">&gt;</span>AddOnScreenDebugMessage<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">-</span><span style="color:#008c00; ">1</span><span style="color:#d2cd86; ">,</span> <span style="color:#009f00; ">15.0</span><span style="color:#006600; ">f</span><span style="color:#d2cd86; ">,</span> FColor<span style="color:#b060b0; ">::</span>Green<span style="color:#d2cd86; ">,</span> FString<span style="color:#b060b0; ">::</span>Printf<span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">TEXT</span><span style="color:#d2cd86; ">(</span><span style="color:#02d045; ">"</span><span style="color:#007997; ">%s</span><span style="color:#00c4c4; "> </span><span style="color:#007997; ">%d</span><span style="color:#02d045; ">"</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">,</span> <span style="color:#d2cd86; ">*</span><span style="color:#e66170; font-weight:bold; ">pair</span><span style="color:#d2cd86; ">.</span>Key<span style="color:#d2cd86; ">.</span>ToString<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">,</span> <span style="color:#e66170; font-weight:bold; ">pair</span><span style="color:#d2cd86; ">.</span>Value<span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span></pre>
  <div>
    <h2 class="font-weight-bold mt-3">
      PlayerStatEffectManagement.cpp
      <div class="btn-group">
        <a
          href="/CodeSnippets/PlayerStatEffectManagementCPP.html"
          class="btn btn-primary"
          role="button"
          >Raw</a
        >
      </div>
    </h2>
  </div>
</div>
